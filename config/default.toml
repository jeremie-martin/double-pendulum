# Double Pendulum Simulation Configuration
# All angles are in degrees, converted to radians internally

[physics]
gravity = 9.81
length1 = 1.0
length2 = 1.0
mass1 = 1.0
mass2 = 1.0
initial_angle1_deg = 152.2
initial_angle2_deg = 152.0
initial_velocity1 = 0.0
initial_velocity2 = 0.0

[simulation]
pendulum_count = 10000
angle_variation_deg = 0.1      # Spread around initial_angle1
duration_seconds = 11.0        # Physical simulation time
total_frames = 660             # Number of frames to output

# Physics quality controls simulation accuracy via max timestep:
#   low    = max_dt 20ms (~100 steps/period, visible artifacts)
#   medium = max_dt 12ms (~167 steps/period, acceptable quality)
#   high   = max_dt 7ms  (~286 steps/period, gold standard)
#   ultra  = max_dt 3ms  (~667 steps/period, perfect accuracy)
# You can also set max_dt directly (in seconds) to override the preset.
physics_quality = "high"
# max_dt = 0.007              # Uncomment to override quality preset

[render]
width = 1080
height = 1080
thread_count = 16               # 0 = auto-detect hardware concurrency

[post_process]
# Standard post-processing pipeline: normalize -> exposure -> tone_map -> contrast -> gamma
tone_map = "none"              # "none", "reinhard", "reinhard_extended", "aces", "logarithmic"
reinhard_white_point = 1.0     # Only used with reinhard_extended
exposure = 0.0                 # Brightness in stops (0 = no change, +1 = 2x brighter)
contrast = 1.0                 # Centered at 0.5 (1.0 = no change, >1 = more contrast)
gamma = 2.2                    # Display gamma (2.2 = sRGB standard)

[color]
scheme = "spectrum"            # spectrum, rainbow, heat, cool, monochrome
start = 0.0                    # Range start [0, 1]
end = 1.0                      # Range end [0, 1]

[detection]
# Note: Boom is detected via max angular causticness (see boom_detection.h)

# Chaos: when variance exceeds this (full chaos/noise)
chaos_threshold = 500.0        # radians^2
chaos_confirmation = 10        # Consecutive frames above threshold

# Optional early stopping
early_stop_after_chaos = false

[filter]
min_boom_seconds = 8.0   # Boom between 8-15 seconds
max_boom_seconds = 15.0
min_uniformity = 0.9     # Minimum distribution uniformity (0=concentrated, 1=uniform on disk)

[output]
format = "png"                 # "png" or "video"
directory = "output"
filename_prefix = "frame"
video_codec = "libx264"
video_crf = 23                 # Quality (0-51, lower = better)
video_fps = 60                 # Video FPS (only affects video encoding, not simulation)
