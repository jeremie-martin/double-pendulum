# Pendulum Uploader

YouTube uploader for double pendulum simulation videos with auto-generated metadata.

## Features

- **Auto-generated metadata**: Titles, descriptions, and tags are generated from simulation metadata
- **Multiple title templates**: Variety of engaging titles randomly selected
- **Batch upload**: Upload entire batch directories at once
- **Preview mode**: See generated metadata without uploading
- **OAuth 2.0**: Secure authentication with YouTube API

## Installation

```bash
cd youtube-uploader
uv sync
```

## YouTube API Setup

Before you can upload videos, you need to set up YouTube API credentials:

### 1. Create a Google Cloud Project

1. Go to [Google Cloud Console](https://console.cloud.google.com/)
2. Create a new project or select an existing one
3. Enable the **YouTube Data API v3**:
   - Go to "APIs & Services" > "Library"
   - Search for "YouTube Data API v3"
   - Click "Enable"

### 2. Create OAuth 2.0 Credentials

1. Go to "APIs & Services" > "Credentials"
2. Click "Create Credentials" > "OAuth client ID"
3. If prompted, configure the OAuth consent screen:
   - User Type: External (or Internal for Google Workspace)
   - App name: "Pendulum Uploader"
   - Add your email as a test user
4. For Application type, select **Desktop app**
5. Download the JSON file

### 3. Set Up Credentials

1. Create a `credentials` directory:
   ```bash
   mkdir -p credentials
   ```

2. Rename the downloaded file to `client_secrets.json` and place it in the `credentials` directory:
   ```bash
   mv ~/Downloads/client_secret_*.json credentials/client_secrets.json
   ```

3. The first time you run the uploader, it will open a browser for OAuth consent. After authorizing, a `token.pickle` file will be created for future use.

## Usage

### Preview Metadata

See what title/description/tags would be generated without uploading:

```bash
uv run pendulum-upload preview /path/to/video_directory
```

### Upload a Single Video

```bash
# Upload as private (default)
uv run pendulum-upload upload /path/to/video_directory

# Upload as unlisted
uv run pendulum-upload upload /path/to/video_directory --privacy unlisted

# Dry run (show what would be uploaded)
uv run pendulum-upload upload /path/to/video_directory --dry-run
```

### Upload a Batch

```bash
# Upload all videos in a batch directory
uv run pendulum-upload batch /path/to/batch_output

# Upload first 5 videos only
uv run pendulum-upload batch /path/to/batch_output --limit 5

# Dry run
uv run pendulum-upload batch /path/to/batch_output --dry-run
```

### Custom Credentials Location

```bash
uv run pendulum-upload upload /path/to/video --credentials /path/to/credentials
```

## Video Directory Structure

The uploader expects each video directory to contain:

```
video_XXXX/
├── video.mp4       # The video file
└── metadata.json   # Simulation metadata (generated by C++ app)
```

The `metadata.json` file is automatically generated by the C++ simulation and contains:
- Pendulum count
- Simulation duration and speed
- Boom frame (when chaos begins)
- Resolution and other parameters

## Generated Metadata Examples

### Titles (randomly selected)

- "1 Million Pendulums Diverge into Chaos"
- "Double Pendulum Chaos - 100K Simulations"
- "When 500K Pendulums Go Chaotic"
- "Mesmerizing Chaos: 1 Million Double Pendulums"
- "The Butterfly Effect with 100K Pendulums"

### Tags

Automatically includes:
- double pendulum, chaos theory, physics simulation, butterfly effect
- satisfying video, mesmerizing, hypnotic
- Dynamic tags based on pendulum count (e.g., "million pendulums")

### Category

All videos are uploaded to the **Music** category (ID 10) since they sync with music.

## Security Notes

- Never commit `credentials/` to version control
- The `token.pickle` file contains your OAuth token - keep it secure
- Use `--privacy private` until you're ready to publish
